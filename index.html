<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>SimpleAuthentication</title>
	<link type="text/css" href="style.css" rel="stylesheet" media="screen" />
</head>
<body>

  <h1>SimpleAuthentication</h1>

  <p id="introduction">
    SimpleAuthentication is an authentication engine built for Rails 2.3+. Its goal is to
    solve one problem - authentication - and to do it well. It's built with flexibility
    and extensibility in mind while still being as easy as possible to set up and use.
  </p>

  <h2>Installing</h2>

  <h3>Using a template</h3>

  <p>
    If you're creating a new Rails application, you can use
    <a href="http://gist.github.com/79936">this template</a> which will
    get you up and running with SimpleAuthentication in no time:
  </p>

  <pre><code>rails &lt;name&gt; -m http://gist.github.com/79936.txt</code></pre>

  <p>
    Just answer a few yes/no questions and it will set up the application for you,
    then you can skip straight to <a href="#usage">Usage</a>.
  </p>

  <h3>Installing gem-by-gem</h3>

  <p>Or if you want to do things more manually to see what's going on, first add the gem to your <code>environment.rb</code>:</p>

  <pre><code>config.gem "toretore-simple_authentication", :source =&gt; "http://gems.github.com/", :lib =&gt; "simple_authentication"</code></pre>

  <p>Then, depending on whether you want to use username/password authentication, OpenID, or both:</p>

  <pre><code>#To add username and password authentication:
config.gem "toretore-simple_password_authentication", :source =&gt; "http://gems.github.com/", :lib =&gt; "simple_password_authentication"
#To add OpenID authentication:
config.gem "toretore-simple_openid_authentication", :source =&gt; "http://gems.github.com/", :lib =&gt; "simple_openid_authentication"</code></pre>

  <p>Install the gems:</p>

  <pre><code>[sudo] rake gems:install</code></pre>

  <p>
    If you're using OpenID authentication, you also need the "open_id_authentication" plugin:
  </p>

  <pre><code>script/plugin install git://github.com/rails/open_id_authentication.git</code></pre>

  <p>
    This plugin also assumes you have a <code>root_url</code>, so let's just add one pointing
    to the "currently logged in as" page for now:
  </p>

  <pre><code>map.root :controller =&gt; "logins", :action =&gt; "show"</code></pre>

  <h3>Migrations - setting up the database</h3>

  <p>
    By now everything is ready for use. There are a few things you should check
    before using it though. SimpleAuthentication assumes you have a "users" table
    to authenticate against. If you don't have this, you can generate a migration:
  </p>

  <pre><code>script/generate simple_authentication --migration User</code></pre>

  <p>And if you're using username/password authentication, this migration will add the necessary fields:</p>

  <pre><code>script/generate simple_password_authentication --migration User</code></pre>

  <p>If you're using OpenID, you need an <code>openid_identifier</code> field:</p>

  <pre><code>script/generate simple_openid_authentication --migration User</code></pre>

  <p>And the <code>open_id_authentication</code> plugin needs a couple of tables to do its thing:</p>

  <pre><code>script/generate open_id_authentication_tables CreateOpenidTables</code></pre>

  <p>Then run the migrations:</p>

  <pre><code>rake db:migrate</code></pre>


  <h2 id="usage">Using</h2>

  <p>
    If you now start your server and go to <a href="http://localhost:3000/login/new">http://localhost:3000/login/new</a>,
    you should see one of two things: If you installed both password and OpenID authentication, you will have to
    choose which one to login with. When you click one of those links, or if you only installed one authentication
    method, you will see the login form. For OpenID, you can just enter your identifier to log in - the User object
    will be created automatically.
  </p>
  
  <p>
    For username and password authentication you will have to add the user to
    the database before you can log in. SimpleAuthentication does not include
    a user registration module. The reasoning behind this is that it doesn't
    strictly belong to the problem being solved (authentication), and it's
    very likely that registration procedures vary a lot between applications. Thus,
    a registration module would probably just be getting in your way and not
    be much more than a scaffold:
  </p>

  <pre><code>script/generate scaffold User --skip-migration</code></pre>

  <p class="note">
    <em>Note:</em>
    Doing this will create a model file in <code>app/models/user.rb</code>, which
    will override the one built into the SimpleAuthentication engine. This is fine,
    but except you want to override some defaults or add something, just remove it
    for now.
  </p>

  <p>
    What it does include, though, is a User model which is ready to be used by
    such a registration module. The User model will hash passwords using a salt
    and use these when authenticating. To add a user, simply:
  </p>

  <pre><code>User.create(:name =&gt; "Ahura Mazda", :username =&gt; "mazda", :password =&gt; "a brimful of asha")</code></pre>

  <h2>The end</h2>

  <p>
    For further documentation, see <a href="http://wiki.github.com/toretore/simple_authentication">the Wiki</a>.
  </p>
  
</body>
</html>
